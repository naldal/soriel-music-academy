<html xmlns:th="http://www.thymleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml" lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>reservation page</title>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.js" integrity="sha256-DrT5NfxfbHvMHux31Lkhxg42LY6of8TaYyK50jnxRnM=" crossorigin="anonymous"></script>
    <script defer src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <link
            rel="stylesheet"
            href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
            integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk"
            crossorigin="anonymous"
    />
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@500&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@700&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+KR:wght@600&display=swap" rel="stylesheet" />

    <link rel="stylesheet" th:href="@{/static/css/soriel_Header.css}" />
</head>


<body>
<div class="container">
    <th:block th:replace="fragment/soriel_Header :: headerFragment"></th:block>
    <div class="text-center" style="font-family: 'Noto Serif KR', serif; margin-top: 100px;">
        <p class="h2">ㅡ</p>
    </div>

    <form method="post" th:action="@{'/post/update/'+${boardDto.id}}">
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
        <input type="hidden" name="_method" value="put">
        <input type="hidden" name="id" th:value="${boardDto.id}">

        <div class="form-group">
            <label>문의 제목</label>
            <input type="text" name="title" class="form-control" th:value="${boardDto.title}"/>
        </div>
        <div class="form-group">
            <label>카테고리</label>
            <select name="category" class="form-control">
                <option value="입학상담">입학상담</option>
                <option value="교재구입/대여">교재구입/대여</option>
                <option value="차량운행">차량운행</option>
                <option value="기타">기타</option>
            </select>
        </div>

        <div class="form-group">
            <label>문의내용</label>
            <textarea name="content" class="form-control"rows="10" th:value="${boardDto.content}"></textarea>
        </div>

        <div class="text-right" style="margin-bottom: 100px;">
            <input class="btn btn-outline-secondary" type="submit" value="수정">
        </div>
    </form>
</div>
</body>
<script>
    $("#updateBtn").click(function (){
        var data = {
            title : $("#title").val(),
            content : $("#content").val()
        };
        var id = $("#id").val();

        $.ajax({
            type: 'PUT',
            url: '/post/update/'+id,
            dataType: 'json',
            contentType: 'application/json; charset=utf-8',
            data: JSON.stringify(data)
        }).done(function(){
            alert('글이 수정되었습니다');
            window.location.href="/";
        }).fail(function(error){
            alert(JSON.stringify(error));
        });
    });

</script>
</html>